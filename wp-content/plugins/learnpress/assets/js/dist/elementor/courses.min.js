!function(){"use strict";var e=(e,t,n)=>{const s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3);const o="expires="+s.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"};window.lpElWidgetCoursesByPage=(()=>{const t="list-courses-elm-wrapper",n="list-courses-elm",s="learn-press-pagination",o="lp-skeleton-animation";let r={};const c=(()=>{let e=window.location.href;return e.includes("?")&&(e=e.split("?")[0]),e})();let i,a="number",d=!0,l=!1;const u=(e,t={})=>{var r,c;console.log("/*** loadApiCoursesOfWidget ***/");const u=e.dataset.widgetId;let f,p=window[`lpWidget_${u}`];if(p&&"yes"===p.courses_rest)if("yes"===p.courses_rest_no_load_page&&d)d=!1;else{switch(p={...p,...t},i=null!==(r=p.lp_rest_url)&&void 0!==r?r:"",a=null!==(c=p.courses_rest_pagination_type)&&void 0!==c?c:"number",a){case"load-more":f=(e=>{const t=e.querySelector(".courses-btn-load-more");let r;t&&(r=t.querySelector(".lp-loading-circle"));const c=e.querySelector(`.${o}`),i=e.querySelector(`.${n}`);return{before:()=>{t&&(r.classList.remove("hide"),t.setAttribute("disabled","disabled"))},success:o=>{const r=document.createElement("div");r.innerHTML=o.data.content||"";const c=r.querySelector(`.${n}`),a=r.querySelector(`.${s}`);i?(i.insertAdjacentHTML("beforeend",c.innerHTML),a||t.remove()):e.insertAdjacentHTML("beforeend",o.data.content||""),o.data.pagination&&e.insertAdjacentHTML("beforeend",o.data.pagination||"")},error:e=>{},completed:()=>{c&&(c.style.display="none"),t&&(r.classList.add("hide"),t.removeAttribute("disabled"))}}})(e);break;case"infinite":f=(e=>{const t=e.querySelector(`.${o}`),r=e.querySelector(".courses-load-infinite");let c;r&&(c=r.querySelector(".lp-loading-circle"));const i=e.querySelector(`.${n}`);return{before:()=>{l=!0,c&&c.classList.remove("hide")},success:t=>{const o=document.createElement("div");o.innerHTML=t.data.content||"";const c=o.querySelector(`.${n}`),a=o.querySelector(`.${s}`);i?(i.insertAdjacentHTML("beforeend",c.innerHTML),a||r.remove()):e.insertAdjacentHTML("beforeend",t.data.content||""),t.data.pagination&&e.insertAdjacentHTML("beforeend",t.data.pagination||"")},error:e=>{},completed:()=>{l=!1,t&&(t.style.display="none"),r&&c.classList.add("hide")}}})(e);break;default:f=(e=>{if(!e)return;const t=e.querySelector(`.${o}`),r=e.querySelector(`.${n}`),c=e.querySelector(`.${s}`);return{before:()=>{},success:t=>{const o=document.createElement("div");o.innerHTML=t.data.content||"";const i=o.querySelector(`.${n}`),a=o.querySelector(`.${s}`);r?(r.innerHTML=i.innerHTML,c&&(c.innerHTML=a.innerHTML)):e.insertAdjacentHTML("beforeend",t.data.content||""),t.data.pagination&&e.insertAdjacentHTML("beforeend",t.data.pagination||"")},error:e=>{},completed:()=>{t&&(t.style.display="none")}}})(e)}f&&((e,t={})=>{const n={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}};void 0!==e.nonce&&(n.headers["X-WP-Nonce"]=e.nonce),((e,t={},n={})=>{"function"==typeof n.before&&n.before(),fetch(e,{method:"GET",...t}).then((e=>e.json())).then((e=>{"function"==typeof n.success&&n.success(e)})).catch((e=>{"function"==typeof n.error&&n.error(e)})).finally((()=>{"function"==typeof n.completed&&n.completed()}))})(i+"lp/v1/courses/courses-widget-by-page",n,t)})(p,f)}},f=()=>{document.addEventListener("change",(function(e){((e,n)=>{if(!n.classList.contains("courses-order-by"))return;const s=n.closest(`.${t}`);if(!s)return;e.preventDefault();const o=s.dataset.widgetId,i=window[`lpWidget_${o}`];r.order_by=n.value,r.paged=1,"yes"!==i.courses_rest?window.location.href=((e,t)=>{const n=new URL(e);return Object.keys(t).forEach((e=>{n.searchParams.set(e,t[e])})),n})(c,r):u(s,r)})(e,e.target)})),document.addEventListener("click",(function(s){const o=s.target;y(s,o),p(s,o),((s,o)=>{if(!o.classList.contains("courses-layout")){if(!o.closest(".courses-layout"))return;o=o.closest(".courses-layout")}const r=o.closest(`.${t}`);if(!r)return;s.preventDefault();const c=r.querySelector(`.${n}`),i=o.closest(".courses-layouts-display-list"),a=r.dataset.widgetId;i.querySelectorAll("li").forEach((e=>{e.classList.remove("active")}));const d=o.dataset.layout;o.classList.add("active"),c.classList.remove("grid","list"),c.classList.add(d),e(`layout_widget_${a}`,d,7)})(s,o)})),document.addEventListener("scroll",(function(e){const t=e.target;g(e,t)})),document.addEventListener("keyup",(function(e){e.target})),document.addEventListener("submit",(function(e){e.target}))},p=(e,n)=>{if(!n.classList.contains("page-numbers")){if(!n.closest(".page-numbers"))return;n=n.closest(".page-numbers")}const s=n.closest(`.${t}`);if(!s)return;const o=s.dataset.widgetId,c=window[`lpWidget_${o}`];if(!c||"yes"!==c.courses_rest)return;e.preventDefault();const i=r.paged;n.classList.contains("prev")?r.paged=i-1:n.classList.contains("next")?r.paged=i+1:r.paged=parseInt(n.textContent),u(s,r)},y=(e,n)=>{if(!n.classList.contains("courses-btn-load-more")){if(!n.closest(".courses-btn-load-more"))return;n=n.closest(".courses-btn-load-more")}const s=n.closest(`.${t}`);if(!s)return;const o=s.dataset.widgetId,c=window[`lpWidget_${o}`];c&&"yes"===c.courses_rest&&(e.preventDefault(),++r.paged,u(s,r))},g=(e,n)=>{const s=document.querySelector(`.${t}`);if(!s)return;const o=s.querySelector(".courses-load-infinite");if(!o)return;const c=s.dataset.widgetId,i=window[`lpWidget_${c}`];if(!i||"yes"!==i.courses_rest)return;const a=new IntersectionObserver((function(e){for(const t of e)if(t.isIntersecting){if(l)return;++r.paged,u(s,r),a.unobserve(t.target)}}));a.observe(o)};return{init:()=>{const e={},n=window.location.search,s=new URLSearchParams(n);for(const[t,n]of s.entries())e[t]=n;r={...e},r.paged=parseInt(r.paged||1),(()=>{const e=document.querySelectorAll(`.${t}`);e&&e.forEach((e=>{u(e)}))})(),f()}}})(),document.addEventListener("DOMContentLoaded",(function(){window.lpElWidgetCoursesByPage.init()}))}();